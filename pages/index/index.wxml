<view class="page index-page">
  <view class="nav-bar" style="height: {{navBarHeight}}px; padding-top: {{statusBarHeight}}px">
    <view class="brand">
      <view class="brand-title">{{greeting}}，店长</view>
      <view class="brand-sub">今日运营数据已准备就绪</view>
    </view>
    <view class="avatar">店</view>
  </view>

  <scroll-view scroll-y class="page-scroll" style="padding-top: {{navBarHeight}}px">
    <view class="stats card">
      <view class="stats-header">
        <view class="stats-title">核心指标</view>
        <view class="stats-desc">最近更新：{{stats ? '刚刚' : '加载中...'}}</view>
      </view>
      <view class="stats-grid">
        <view class="stats-item">
          <view class="stats-number">{{stats ? stats.storeCount : '--'}}</view>
          <view class="stats-label">在营门店</view>
        </view>
        <view class="stats-item">
          <view class="stats-number">{{stats ? stats.customerCount : '--'}}</view>
          <view class="stats-label">活跃顾客</view>
        </view>
        <view class="stats-item">
          <view class="stats-number">¥{{stats ? stats.monthSales : '--'}}</view>
          <view class="stats-label">本月营收</view>
        </view>
      </view>
    </view>

    <view class="action-section card">
      <view class="section-title">快捷功能</view>
      <view class="action-grid">
        <block wx:for="{{actions}}" wx:key="key">
          <view class="action-card" style="background: {{item.gradient}}" data-url="{{item.url}}" bindtap="handleActionTap">
            <image class="action-icon" src="{{item.icon}}" mode="aspectFit" />
            <view class="action-info">
              <view class="action-title">{{item.title}}</view>
              <view class="action-desc">{{item.desc}}</view>
            </view>
          </view>
        </block>
      </view>
    </view>

    <view class="remind-section card">
      <view class="section-title">今日待办</view>
      <view class="remind-list">
        <block wx:for="{{highlights}}" wx:key="id">
          <view class="remind-item">
            <view class="remind-icon {{item.icon}}"></view>
            <view class="remind-content">
              <view class="remind-title">{{item.title}}</view>
              <view class="remind-sub">{{item.subtitle}}</view>
            </view>
          </view>
        </block>
      </view>
    </view>
  </scroll-view>
</view>
